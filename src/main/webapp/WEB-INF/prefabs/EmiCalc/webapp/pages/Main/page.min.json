{
  "markup" : "%3Cwm-prefab-container%3E%3C%2Fwm-prefab-container%3E",
  "script" : "%2F*%0A+*+Use+App.getDependency+for+Dependency+Injection%0A+*+eg%3A+var+DialogService+%3D+App.getDependency%28%27DialogService%27%29%3B%0A+*%2F%0A%0A%2F*%0A+*+This+function+will+be+invoked+when+any+of+this+prefab%27s+property+is+changed%0A+*+%40key%3A+property+name%0A+*+%40newVal%3A+new+value+of+the+property%0A+*+%40oldVal%3A+old+value+of+the+property%0A+*%2F%0APrefab.onPropertyChange+%3D+function%28key%2C+newVal%2C+oldVal%29+%7B%0A++++%2F*%0A++++switch+%28key%29+%7B%0A++++++++case+%22prop1%22%3A%0A++++++++++++%2F%2F+do+something+with+newVal+for+property+%27prop1%27%0A++++++++++++break%3B%0A++++++++case+%22prop2%22%3A%0A++++++++++++%2F%2F+do+something+with+newVal+for+property+%27prop2%27%0A++++++++++++break%3B%0A++++%7D%0A++++*%2F%0A%7D%3B%0Alet+annualInterestRate%3B%0APrefab.onReady+%3D+function%28%29+%7B%0A++++%2F%2F+this+method+will+be+triggered+post+initialization+of+the+prefab.%0A++++annualInterestRate+%3D+24%3B%0A%0A%7D%3B%0A%0A%2F%2F+Prefab.calculateLoanAmount+%3D+function%28loanAmount%2C+loanTenureInYears%2C+annualInterestRate%29+%7B%0A%2F%2F+++++%2F%2F+Convert+annual+interest+rate+to+a+decimal%0A%2F%2F+++++const+monthlyInterestRate+%3D+annualInterestRate+%2F+12+%2F+100%3B%0A%2F%2F+++++const+fortnightlyInterestRate+%3D+annualInterestRate+%2F+26+%2F+100%3B%0A%2F%2F+++++const+weeklyInterestRate+%3D+annualInterestRate+%2F+52+%2F+100%3B%0A%0A%2F%2F+++++%2F%2F+Calculate+the+number+of+payments%0A%2F%2F+++++const+numberOfMonthlyPayments+%3D+loanTenureInYears+*+12%3B%0A%2F%2F+++++const+numberOfFortnightlyPayments+%3D+loanTenureInYears+*+26%3B%0A%2F%2F+++++const+numberOfWeeklyPayments+%3D+loanTenureInYears+*+52%3B%0A%0A%2F%2F+++++%2F%2F+Calculate+EMI+for+each+frequency%0A%2F%2F+++++const+monthlyEMI+%3D+loanAmount+*+monthlyInterestRate+*+Math.pow%281+%2B+monthlyInterestRate%2C+numberOfMonthlyPayments%29+%2F+%28Math.pow%281+%2B+monthlyInterestRate%2C+numberOfMonthlyPayments%29+-+1%29%3B%0A%2F%2F+++++const+fortnightlyEMI+%3D+loanAmount+*+fortnightlyInterestRate+*+Math.pow%281+%2B+fortnightlyInterestRate%2C+numberOfFortnightlyPayments%29+%2F+%28Math.pow%281+%2B+fortnightlyInterestRate%2C+numberOfFortnightlyPayments%29+-+1%29%3B%0A%2F%2F+++++const+weeklyEMI+%3D+loanAmount+*+weeklyInterestRate+*+Math.pow%281+%2B+weeklyInterestRate%2C+numberOfWeeklyPayments%29+%2F+%28Math.pow%281+%2B+weeklyInterestRate%2C+numberOfWeeklyPayments%29+-+1%29%3B%0A%0A%2F%2F+++++%2F%2F+Calculate+total+amounts%0A%2F%2F+++++const+totalInterestMonthly+%3D+%28monthlyEMI+*+numberOfMonthlyPayments%29+-+loanAmount%3B%0A%2F%2F+++++const+totalAmountMonthly+%3D+monthlyEMI+*+numberOfMonthlyPayments%3B%0A%0A%2F%2F+++++const+totalInterestFortnightly+%3D+%28fortnightlyEMI+*+numberOfFortnightlyPayments%29+-+loanAmount%3B%0A%2F%2F+++++const+totalAmountFortnightly+%3D+fortnightlyEMI+*+numberOfFortnightlyPayments%3B%0A%0A%2F%2F+++++const+totalInterestWeekly+%3D+%28weeklyEMI+*+numberOfWeeklyPayments%29+-+loanAmount%3B%0A%2F%2F+++++const+totalAmountWeekly+%3D+weeklyEMI+*+numberOfWeeklyPayments%3B%0A%0A%2F%2F+++++%2F%2F+Calculate+percentages%0A%2F%2F+++++const+interestPercentageMonthly+%3D+%28totalInterestMonthly+%2F+totalAmountMonthly%29+*+100%3B%0A%2F%2F+++++const+principalPercentageMonthly+%3D+%28loanAmount+%2F+totalAmountMonthly%29+*+100%3B%0A%0A%2F%2F+++++const+interestPercentageFortnightly+%3D+%28totalInterestFortnightly+%2F+totalAmountFortnightly%29+*+100%3B%0A%2F%2F+++++const+principalPercentageFortnightly+%3D+%28loanAmount+%2F+totalAmountFortnightly%29+*+100%3B%0A%0A%2F%2F+++++const+interestPercentageWeekly+%3D+%28totalInterestWeekly+%2F+totalAmountWeekly%29+*+100%3B%0A%2F%2F+++++const+principalPercentageWeekly+%3D+%28loanAmount+%2F+totalAmountWeekly%29+*+100%3B%0A%0A%2F%2F+++++%2F%2F+Construct+the+result+JSON+object%0A%2F%2F+++++const+result+%3D+%7B%0A%2F%2F+++++++++%27EMI_Details%27%3A+%7B%0A%2F%2F+++++++++++++%27Monthly%27%3A+%7B%0A%2F%2F+++++++++++++++++%27Emi%27%3A+Math.round%28monthlyEMI%29%2C%0A%2F%2F+++++++++++++++++%27InterestAmt%27%3A+Math.round%28totalInterestMonthly%29%2C%0A%2F%2F+++++++++++++++++%27PricipalAmt%27%3A+loanAmount%2C%0A%2F%2F+++++++++++++++++%27InterestPercentage%27%3A+Math.round%28interestPercentageMonthly%29%2C%0A%2F%2F+++++++++++++++++%27PricipalPercentage%27%3A+Math.round%28principalPercentageMonthly%29%2C%0A%2F%2F+++++++++++++++++%27TotalPayment%27%3A+%28Math.round%28totalInterestMonthly%29+%2B+parseInt%28loanAmount%29%29%0A%2F%2F+++++++++++++%7D%2C%0A%2F%2F+++++++++++++%27Fortnightly%27%3A+%7B%0A%2F%2F+++++++++++++++++%27Emi%27%3A+Math.round%28fortnightlyEMI%29%2C%0A%2F%2F+++++++++++++++++%27InterestAmt%27%3A+Math.round%28totalInterestFortnightly%29%2C%0A%2F%2F+++++++++++++++++%27PricipalAmt%27%3A+loanAmount%2C%0A%2F%2F+++++++++++++++++%27InterestPercentage%27%3A+Math.round%28interestPercentageFortnightly%29%2C%0A%2F%2F+++++++++++++++++%27PricipalPercentage%27%3A+Math.round%28principalPercentageFortnightly%29%2C%0A%2F%2F+++++++++++++++++%27TotalPayment%27%3A+%28Math.round%28totalInterestFortnightly%29+%2B+parseInt%28loanAmount%29%29%0A%2F%2F+++++++++++++%7D%2C%0A%2F%2F+++++++++++++%27Weekly%27%3A+%7B%0A%2F%2F+++++++++++++++++%27Emi%27%3A+Math.round%28weeklyEMI%29%2C%0A%2F%2F+++++++++++++++++%27InterestAmt%27%3A+Math.round%28totalInterestWeekly%29%2C%0A%2F%2F+++++++++++++++++%27PricipalAmt%27%3A+loanAmount%2C%0A%2F%2F+++++++++++++++++%27InterestPercentage%27%3A+Math.round%28interestPercentageWeekly%29%2C%0A%2F%2F+++++++++++++++++%27PricipalPercentage%27%3A+Math.round%28principalPercentageWeekly%29%2C%0A%2F%2F+++++++++++++++++%27TotalPayment%27%3A+%28Math.round%28totalInterestWeekly%29+%2B+parseInt%28loanAmount%29%29%0A%2F%2F+++++++++++++%7D%0A%2F%2F+++++++++%7D%0A%2F%2F+++++%7D%3B%0A%0A%2F%2F+++++Prefab.calculatedamount+%3D+result%3B%0A%2F%2F+++++return+result%3B%0A%2F%2F+%7D%3B%0A%0A%0A%2F*%0A+*+calculateLoan+Amount%0A+*%2F%0APrefab.calculatLaonAmount+%3D+function+%28loanAmount%2C+loanTenureInYears%2C+annualInterestRate%29+%7B%0A++++%2F%2F+Convert+annual+interest+rate+to+a+decimal%0A++++const+monthlyInterestRate+%3D+annualInterestRate+%2F+12+%2F+100%3B%0A++++const+fortnightlyInterestRate+%3D+annualInterestRate+%2F+26+%2F+100%3B%0A++++const+weeklyInterestRate+%3D+annualInterestRate+%2F+52+%2F+100%3B%0A%0A++++%2F%2F+Calculate+the+number+of+payments%0A++++const+numberOfMonthlyPayments+%3D+loanTenureInYears+*+12%3B%0A++++const+numberOfFortnightlyPayments+%3D+loanTenureInYears+*+26%3B%0A++++const+numberOfWeeklyPayments+%3D+loanTenureInYears+*+52%3B%0A%0A++++%2F%2F+Calculate+EMI+for+each+frequency%0A++++const+monthlyEMI+%3D+loanAmount+*+monthlyInterestRate+*+Math.pow%281+%2B+monthlyInterestRate%2C+numberOfMonthlyPayments%29+%2F+%28Math.pow%281+%2B+monthlyInterestRate%2C+numberOfMonthlyPayments%29+-+1%29%3B%0A++++const+fortnightlyEMI+%3D+loanAmount+*+fortnightlyInterestRate+*+Math.pow%281+%2B+fortnightlyInterestRate%2C+numberOfFortnightlyPayments%29+%2F+%28Math.pow%281+%2B+fortnightlyInterestRate%2C+numberOfFortnightlyPayments%29+-+1%29%3B%0A++++const+weeklyEMI+%3D+loanAmount+*+weeklyInterestRate+*+Math.pow%281+%2B+weeklyInterestRate%2C+numberOfWeeklyPayments%29+%2F+%28Math.pow%281+%2B+weeklyInterestRate%2C+numberOfWeeklyPayments%29+-+1%29%3B%0A%0A++++%2F%2F+Calculate+total+amounts%0A++++const+totalInterestMonthly+%3D+%28monthlyEMI+*+numberOfMonthlyPayments%29+-+loanAmount%3B%0A++++const+totalAmountMonthly+%3D+monthlyEMI+*+numberOfMonthlyPayments%3B%0A%0A++++const+totalInterestFortnightly+%3D+%28fortnightlyEMI+*+numberOfFortnightlyPayments%29+-+loanAmount%3B%0A++++const+totalAmountFortnightly+%3D+fortnightlyEMI+*+numberOfFortnightlyPayments%3B%0A%0A++++const+totalInterestWeekly+%3D+%28weeklyEMI+*+numberOfWeeklyPayments%29+-+loanAmount%3B%0A++++const+totalAmountWeekly+%3D+weeklyEMI+*+numberOfWeeklyPayments%3B%0A%0A++++%2F%2F+Calculate+percentages%0A++++const+interestPercentageMonthly+%3D+%28totalInterestMonthly+%2F+totalAmountMonthly%29+*+100%3B%0A++++const+principalPercentageMonthly+%3D+%28loanAmount+%2F+totalAmountMonthly%29+*+100%3B%0A%0A++++const+interestPercentageFortnightly+%3D+%28totalInterestFortnightly+%2F+totalAmountFortnightly%29+*+100%3B%0A++++const+principalPercentageFortnightly+%3D+%28loanAmount+%2F+totalAmountFortnightly%29+*+100%3B%0A%0A++++const+interestPercentageWeekly+%3D+%28totalInterestWeekly+%2F+totalAmountWeekly%29+*+100%3B%0A++++const+principalPercentageWeekly+%3D+%28loanAmount+%2F+totalAmountWeekly%29+*+100%3B%0A%0A++++%2F%2F+Construct+the+result+JSON+object%0A++++const+result+%3D+%7B%0A++++++++%27EMI_Details%27%3A+%7B%0A++++++++++++%27Monthly%27%3A+%7B%0A++++++++++++++++%27Emi%27%3A+Math.round%28monthlyEMI%29%2C%0A++++++++++++++++%27InterestAmt%27%3A+Math.round%28totalInterestMonthly%29%2C%0A++++++++++++++++%27PricipalAmt%27%3A+loanAmount%2C%0A++++++++++++++++%27InterestPercentage%27%3A+Math.round%28interestPercentageMonthly%29%2C%0A++++++++++++++++%27PricipalPercentage%27%3A+Math.round%28principalPercentageMonthly%29%2C%0A++++++++++++++++%27TotalPayment%27%3A+%28Math.round%28totalInterestMonthly%29+%2B+parseInt%28loanAmount%29%29%0A++++++++++++%7D%2C%0A++++++++++++%27Fortnightly%27%3A+%7B%0A++++++++++++++++%27Emi%27%3A+Math.round%28fortnightlyEMI%29%2C%0A++++++++++++++++%27InterestAmt%27%3A+Math.round%28totalInterestFortnightly%29%2C%0A++++++++++++++++%27PricipalAmt%27%3A+loanAmount%2C%0A++++++++++++++++%27InterestPercentage%27%3A+Math.round%28interestPercentageFortnightly%29%2C%0A++++++++++++++++%27PricipalPercentage%27%3A+Math.round%28principalPercentageFortnightly%29%2C%0A++++++++++++++++%27TotalPayment%27%3A+%28Math.round%28totalInterestFortnightly%29+%2B+parseInt%28loanAmount%29%29%0A++++++++++++%7D%2C%0A++++++++++++%27Weekly%27%3A+%7B%0A++++++++++++++++%27Emi%27%3A+Math.round%28weeklyEMI%29%2C%0A++++++++++++++++%27InterestAmt%27%3A+Math.round%28totalInterestWeekly%29%2C%0A++++++++++++++++%27PricipalAmt%27%3A+loanAmount%2C%0A++++++++++++++++%27InterestPercentage%27%3A+Math.round%28interestPercentageWeekly%29%2C%0A++++++++++++++++%27PricipalPercentage%27%3A+Math.round%28principalPercentageWeekly%29%2C%0A++++++++++++++++%27TotalPayment%27%3A+%28Math.round%28totalInterestWeekly%29+%2B+parseInt%28loanAmount%29%29%0A++++++++++++%7D%0A++++++++%7D%0A++++%7D%3B%0A%0A++++%2F%2FPrefab.calculatedamount+%3D+result%3B%0A++++return+result%3B%0A%7D%3B",
  "styles" : "",
  "variables" : "%7B%0A++%22supportedLocale%22+%3A+%7B%0A++++%22_id%22+%3A+%22wm-wm.Variable1402640443182%22%2C%0A++++%22name%22+%3A+%22supportedLocale%22%2C%0A++++%22owner%22+%3A+%22Page%22%2C%0A++++%22category%22+%3A+%22wm.Variable%22%2C%0A++++%22dataSet%22+%3A+%7B%0A++++++%22en%22+%3A+%22English%22%0A++++%7D%2C%0A++++%22type%22+%3A+%22string%22%2C%0A++++%22isList%22+%3A+false%2C%0A++++%22saveInPhonegap%22+%3A+false%0A++%7D%0A%7D"
}
